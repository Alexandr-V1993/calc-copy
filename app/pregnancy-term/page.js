"use client";
import React, { useEffect, useState } from "react";
import HeaderModal from "../components/NewModal";
import TopForm from "../components/TopForm";
import Contents from "../components/Contents";
import Footer from "../components/Footer";
import PregnancyForm from "./PregnancyForm";
import "./pregnancy.css";

function Pregnancy() {
  const [cycleDate, setCycleDate] = useState(formatDate(new Date()));
  const [cycleDays, setCycleDays] = useState(28);
  function formatDate(date) {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, "0");
    const day = String(date.getDate()).padStart(2, "0");
    return `${year}-${month}-${day}`;
  }

  // Функция для локализации и форматирования даты в нужный формат
  function formatLocalizedDate(dateString) {
    const date = new Date(dateString);
    const options = { day: "2-digit", month: "long", year: "numeric" };
    return new Intl.DateTimeFormat("ru-RU", options).format(date);
  }

  return (
    <>
      <HeaderModal />
      <TopForm
        title={"Калькулятор "}
        description={
          "Узнайте предполагаемую дату родов и срок беременности по дате последней менструации или данным УЗИ. Калькулятор поможет спланировать важные этапы и подготовиться к рождению ребенка."
        }
        span={"беременности"}
      >
        <PregnancyForm
          obj={{ cycleDate, cycleDays }}
          mode={"mode"} // Уточните, что должен быть передан в этом поле
          url={"https://boxcalculators.ru/api/calculate/pregnancy"}
        >
          <div className="label-row">
            <div className="row-vans-top"></div>
            <div className="row-vans-bottom">
              <label className="numrange row-1 date">
                <span>Начало последней менструации</span>
                <span className="span-data">
                  ({formatLocalizedDate(cycleDate)})
                </span>
                <input
                  type="date"
                  className="input"
                  value={cycleDate}
                  onChange={(e) => setCycleDate(e.target.value)}
                />
              </label>
              <label className="numrange row-1 van">
                <span>Продолжительность цикла</span>
                <input
                  type="number"
                  className="input"
                  min="0"
                  max="50"
                  value={cycleDays}
                  onChange={(e) => setCycleDays(e.target.value)}
                  required
                />
              </label>
            </div>
          </div>
        </PregnancyForm>

        <Contents>
          <h2>Зачем нужен калькулятор беременности?</h2>

          <p>
            Калькулятор беременности — это незаменимый инструмент для будущих
            мам и их партнёров. Он позволяет рассчитать:
          </p>
          <ul>
            <li>
              <strong>Предполагаемую дату родов (ПДР)</strong>,
            </li>
            <li>
              <strong>Текущую неделю беременности</strong>,
            </li>
            <li>
              <strong>Возраст плода</strong> в неделях и днях.
            </li>
          </ul>

          <p>
            Это помогает заранее спланировать декретный отпуск, подготовить
            документы, купить вещи и просто морально настроиться на встречу с
            малышом.
          </p>

          <h2>Как работает калькулятор?</h2>

          <p>
            Основной метод расчета ПДР — это <strong>формула Негеле</strong>,
            которая добавляет 280 дней (40 недель) к первому дню последней
            менструации (ПДПМ). Также можно использовать данные УЗИ для более
            точного определения срока.
          </p>

          <p>
            Однако стоит помнить, что это лишь <strong>примерная дата</strong>.
            Только около 5% детей рождаются точно в день ПДР. Большинство — в
            промежутке ±10 дней.
          </p>

          <h2>Насколько точен калькулятор?</h2>

          <p>Точность зависит от регулярности цикла:</p>

          <ul>
            <li>
              Если цикл регулярный (28–30 дней), формула Негеле даёт погрешность
              всего ±3–5 дней;
            </li>
            <li>
              При нерегулярных циклах рекомендуется ориентироваться на УЗИ, где
              ошибка составляет всего ±5–7 дней;
            </li>
            <li>
              На более поздних сроках дата может корректироваться врачом на
              основании развития плода.
            </li>
          </ul>

          <h2>Что ещё можно узнать?</h2>

          <p>В дополнение к дате родов, калькулятор показывает:</p>

          <ul>
            <li>
              <strong>Текущий срок беременности:</strong> сколько недель и дней
              прошло;
            </li>
            <li>
              <strong>Возраст плода:</strong> его развитие и размеры;
            </li>
            <li>
              <strong>Триместры:</strong> в каком вы сейчас триместре;
            </li>
            <li>
              <strong>Предполагаемую дату зачатия:</strong> если вы хотите
              понять, когда началась беременность.
            </li>
          </ul>

          <h2>Когда лучше рассчитывать ПДР?</h2>

          <p>Самые популярные моменты для расчета:</p>

          <ul>
            <li>
              <strong>После положительного теста на беременность;</strong>
            </li>
            <li>
              <strong>При постановке на учет у врача;</strong>
            </li>
            <li>
              <strong>По данным УЗИ;</strong>
            </li>
            <li>
              <strong>Для планирования отпуска по уходу;</strong>
            </li>
            <li>
              <strong>Для подготовки документов и личных вещей.</strong>
            </li>
          </ul>

          <h2>Формула Негеле</h2>

          <p>Чтобы рассчитать ПДР, используется следующая формула:</p>

          <div className="formula">
            <span>ПДР = Первый день последней менструации + 280 дней</span>
          </div>

          <p>
            То есть к дате последней менструации прибавляется 40 недель. Если
            цикл длиннее или короче стандартных 28 дней, калькулятор
            автоматически корректирует срок.
          </p>

          <h2>Советы по использованию</h2>

          <p>Вот несколько полезных советов:</p>

          <ul>
            <li>
              <strong>Введите точную дату последней менструации,</strong> чтобы
              получить максимально корректный прогноз;
            </li>
            <li>
              <strong>Используйте данные УЗИ,</strong> если ваш цикл
              нерегулярный;
            </li>
            <li>
              <strong>Не забывайте, что это только примерная дата,</strong>{" "}
              реальные роды могут произойти раньше или позже;
            </li>
            <li>
              <strong>Обсудите результат с врачом,</strong> особенно если вы
              используете УЗИ-данные;
            </li>
            <li>
              <strong>Калькулятор подскажет триместр,</strong> вес и рост плода
              на каждой неделе.
            </li>
          </ul>

          <h2>Важно!</h2>

          <p>
            Калькулятор дает общие рекомендации. Для точной информации всегда
            консультируйтесь с врачом или акушеркой. Особенно важно это при
            наличии факторов риска, многоплодной беременности или отклонениях в
            развитии плода.
          </p>

          <h2>Полезные факты</h2>

          <ul>
            <li>
              Около <strong>80%</strong> женщин рождают в течение 10 дней до или
              после ПДР;
            </li>
            <li>
              Формула Негеле работает лучше всего при цикле{" "}
              <strong>28 дней;</strong>
            </li>
            <li>
              Если вы знаете дату зачатия, можно использовать её вместо ПДПМ;
            </li>
            <li>
              Дата родов может быть скорректирована по результатам УЗИ на{" "}
              <strong>12-й неделе беременности;</strong>
            </li>
            <li>
              Беременность считается полноценной с <strong>37 недели</strong> —
              ранее этого срока возможны преждевременные роды.
            </li>
          </ul>

          <h2>Заключение</h2>

          <p>
            Калькулятор беременности от BoxCalculators — простой и надежный
            способ определить предполагаемую дату родов, возраст плода и текущий
            срок беременности. Он поможет вам лучше понимать, что происходит с
            вами и вашим ребенком, и правильно спланировать важные события.
          </p>

          <p>
            Не забывайте, что это лишь <strong>инструмент оценки</strong>, и
            окончательное решение принимает лечащий врач. Тем не менее, он очень
            полезен для повседневного планирования и эмоциональной подготовки к
            материнству.
          </p>

          <p>
            <a href="/">Выбрать другой калькулятор</a>
          </p>
        </Contents>
      </TopForm>
      <Footer />
    </>
  );
}

// Функция для форматирования даты в нужный формат (yyyy-MM-dd)

export default Pregnancy;
